API接口安全整体解决方案如下：
　1. Token授权认证，防止未授权用户获取数据。
　2. 时间戳超时机制，防重放，防止接口被第二次请求，防采集。
　3. URL签名，防止请求参数被篡改。
　4. 采用HTTPS通信协议，防止数据明文传输。
　5. 对数据进行合法性校验。
　6. 接口的要求规范。
　7. 常见场景的安全示例。

## 一、Token授权认证
　　HTTP请求是无状态的，一次请求结束，连接断开，下次服务器再接收到请求，它就不知道这个请求是哪个用户发过来的，但是对我们有访问权限限制的模块而言，它是需要有状态管理的，以便服务端能够准确的知道HTTP请求是哪个用户发起的，从而判断他是否有权限继续这个请求。  
  
　　Token的设计方案是用户在客户端通过用户名和密码登录后，服务器会给客户端返回一个Token，后续客户端对需要授权的模块的所有的操作都需要带上这个Token，服务器端接收到请求后进行Token验证，如果Token验证通过，说明是授权的请求。  

　　Token生成应遵守的规范：
　　　1. 长度不低于16位，应用内要唯一，否则会出现授权混乱，A用户看到了B用户的数据。
　　　2. 禁止使用固定的Token持续请求，防止被记录，防止授权永久有效。
　　　3. 要设置Token的过期时间，过期后需要客户端重新登录，来获取新的Token。

## 二、时间戳超时机制
　　客户端每次请求接口时，应带上当前时间的时间戳（timestamp），服务端接收到时间戳后，与当前的时间戳进行比对，如果时间差大于限制的时间差（如：1分钟），则认为该请求已失效。

## 三、URL签名
　　将客户端发送给服务端的参数使用某种算法生成签名，请求服务端时带上此签名，然后服务端使用相同的算法进行签名校验，来判断参数在请求过程中是否被篡改过。
  
## 四、采用HTTPS通信协议
　　HTTP协议是以明文方式发送内容，不提供任何方式的数据加密，如果攻击者截取了客户端和服务器之前的传输报文，就可以直接读取其中的信息，因此HTTP协议不适合传输一些敏感信息，如银行卡号，密码、身份证号等。  
   
　　为了解决HTTP这一缺陷，需要使用另一种协议：超文本传输安全协议，即HTTPS协议。为了数据传输的安全，HTTPS在HTTP的基础上加入了SSL协议，SSL依靠证书来验证服务器的身份，并为客户端和服务端之间的通信进行加密。
  
## 五、数据合法性校验
　　1. 不依赖客户端的数据校验，不管客户端有没有进行数据校验，服务端对所有接收到的数据都要做合法性校验。
　　2. 对用户输入的数据进行强制过滤，输出到前端时必须要进行转义，防止XSS攻击。
　　3. 禁止使用PUT和DELETE方式发送请求。

## 六、API要求规范
　　1. 做好API接口分析，所有API必须进行频率控制。
　　2. 所有Token、签名的加密、解密必须放在服务端。
　　3. 所有的接口必须记录访问日志，禁止在日志中记录用户的敏感信息（如：密码，身份证号等）。
　　4. 使用尽量复杂的算法进行加密。

## 七、常见场景的安全示例
　　1. 登录接口
　　3. 短信接口
　　4. 图片验证码接口
　　5. 查询接口
　　6. 上传接口
　　7. 下载接口
   
